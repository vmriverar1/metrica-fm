(()=>{var e={};e.id=4173,e.ids=[4173],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12720:(e,t,r)=>{"use strict";r.d(t,{eu:()=>N,q5:()=>E,BK:()=>k});var a=r(60687),s=r(43210),i=r(11273),n=r(13495),l=r(66156),o=r(14163),c=r(57379);function d(){return()=>{}}var u="Avatar",[m,p]=(0,i.A)(u),[h,f]=m(u),x=s.forwardRef((e,t)=>{let{__scopeAvatar:r,...i}=e,[n,l]=s.useState("idle");return(0,a.jsx)(h,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,a.jsx)(o.sG.span,{...i,ref:t})})});x.displayName=u;var v="AvatarImage",g=s.forwardRef((e,t)=>{let{__scopeAvatar:r,src:i,onLoadingStatusChange:u=()=>{},...m}=e,p=f(v,r),h=function(e,{referrerPolicy:t,crossOrigin:r}){let a=(0,c.useSyncExternalStore)(d,()=>!0,()=>!1),i=s.useRef(null),n=a?(i.current||(i.current=new window.Image),i.current):null,[o,u]=s.useState(()=>b(n,e));return(0,l.N)(()=>{u(b(n,e))},[n,e]),(0,l.N)(()=>{let e=e=>()=>{u(e)};if(!n)return;let a=e("loaded"),s=e("error");return n.addEventListener("load",a),n.addEventListener("error",s),t&&(n.referrerPolicy=t),"string"==typeof r&&(n.crossOrigin=r),()=>{n.removeEventListener("load",a),n.removeEventListener("error",s)}},[n,r,t]),o}(i,m),x=(0,n.c)(e=>{u(e),p.onImageLoadingStatusChange(e)});return(0,l.N)(()=>{"idle"!==h&&x(h)},[h,x]),"loaded"===h?(0,a.jsx)(o.sG.img,{...m,ref:t,src:i}):null});g.displayName=v;var y="AvatarFallback",w=s.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:i,...n}=e,l=f(y,r),[c,d]=s.useState(void 0===i);return s.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>d(!0),i);return()=>window.clearTimeout(e)}},[i]),c&&"loaded"!==l.imageLoadingStatus?(0,a.jsx)(o.sG.span,{...n,ref:t}):null});function b(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}w.displayName=y;var j=r(4780);let N=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(x,{ref:r,className:(0,j.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));N.displayName=x.displayName;let k=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(g,{ref:r,className:(0,j.cn)("aspect-square h-full w-full",e),...t}));k.displayName=g.displayName;let E=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(w,{ref:r,className:(0,j.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));E.displayName=w.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27247:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82614).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},28843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(60687),s=r(43210),i=r(86401),n=r(44830),l=r(43034),o=r(29523),c=r(63503),d=r(91821),u=r(96834),m=r(12720),p=r(48206),h=r(54052),f=r(43619),x=r(27247),v=r(26622);let g=()=>{let[e,t]=(0,s.useState)([]),[r,g]=(0,s.useState)(!0),[y,w]=(0,s.useState)(null),[b,j]=(0,s.useState)(!1),[N,k]=(0,s.useState)(null),[E,A]=(0,s.useState)(1),[_,S]=(0,s.useState)(""),[C,P]=(0,s.useState)("all"),q=async()=>{try{g(!0);let e=await i.Ay.get("/api/admin/newsletter/authors");t(e.authors||[])}catch(e){w(e instanceof Error?e.message:"Error desconocido")}finally{g(!1)}};(0,s.useEffect)(()=>{q()},[]);let T=e.filter(e=>{let t=e.name.toLowerCase().includes(_.toLowerCase())||e.email.toLowerCase().includes(_.toLowerCase())||e.role.toLowerCase().includes(_.toLowerCase()),r="all"===C||e.status===C;return t&&r}),L=T.slice((E-1)*10,10*E),$=[{key:"avatar",label:"",render:e=>(0,a.jsxs)(m.eu,{className:"h-10 w-10",children:[(0,a.jsx)(m.BK,{src:e.avatar,alt:e.name}),(0,a.jsx)(m.q5,{children:e.name.substring(0,2).toUpperCase()})]})},{key:"name",label:"Nombre",render:e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})},{key:"role",label:"Rol",render:e=>(0,a.jsx)(u.E,{variant:"outline",children:e.role})},{key:"specialties",label:"Especialidades",render:e=>(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,2).map((e,t)=>(0,a.jsx)(u.E,{variant:"secondary",className:"text-xs",children:e},t)),e.specialties.length>2&&(0,a.jsxs)(u.E,{variant:"secondary",className:"text-xs",children:["+",e.specialties.length-2]})]})},{key:"article_count",label:"Art\xedculos",render:e=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-medium",children:e.article_count}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.metadata.featured_articles," destacados"]})]})},{key:"status",label:"Estado",render:e=>(0,a.jsx)(u.E,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"Activo":"Inactivo"})},{key:"joined_date",label:"Fecha de Ingreso",render:e=>new Date(e.joined_date).toLocaleDateString("es-PE")}],I=[{label:"Editar",onClick:e=>{k(e),j(!0)},variant:"default"},{label:"Ver Art\xedculos",onClick:e=>{window.open(`/admin/json-crud/newsletter/articles?author=${e.id}`,"_blank")},variant:"outline"},{label:e=>"active"===e.status?"Desactivar":"Activar",onClick:async e=>{try{await i.Ay.put(`/api/admin/newsletter/authors/${e.id}`,{...e,status:"active"===e.status?"inactive":"active"}),await q()}catch(e){w(e instanceof Error?e.message:"Error al actualizar")}},variant:"outline"},{label:"Eliminar",onClick:async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este autor?"))try{await i.Ay.delete(`/api/admin/newsletter/authors/${e.id}`),await q()}catch(e){w(e instanceof Error?e.message:"Error al eliminar")}},variant:"destructive",confirmMessage:"\xbfEst\xe1s seguro de que quieres eliminar este autor? Esta acci\xf3n no se puede deshacer."}],R=async e=>{try{let t={name:e.name,email:e.email,bio:e.bio,avatar:e.avatar||"",role:e.role,social_links:{linkedin:e["social_links.linkedin"]||"",twitter:e["social_links.twitter"]||"",github:e["social_links.github"]||"",website:e["social_links.website"]||""},specialties:e.specialties||[],status:e.status,joined_date:N?.joined_date||new Date().toISOString(),article_count:N?.article_count||0,metadata:N?.metadata||{last_published:"",total_views:0,featured_articles:0}},r=N?`/api/admin/newsletter/authors/${N.id}`:"/api/admin/newsletter/authors",a=N?"PUT":"POST",s=await fetch(r,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){let e=await s.json();throw Error(e.error||"Error al guardar autor")}j(!1),k(null),await q(),w(null)}catch(e){w(e instanceof Error?e.message:"Error al guardar")}};return r?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[y&&(0,a.jsx)(d.Fc,{variant:"destructive",children:(0,a.jsx)(d.TN,{children:y})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(p.A,{className:"h-6 w-6 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Gesti\xf3n de Autores"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Administra los autores del newsletter"})]})]}),(0,a.jsxs)(o.$,{onClick:()=>{k(null),j(!0)},className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),"Nuevo Autor"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Total Autores"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:e.length})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Autores Activos"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-900",children:e.filter(e=>"active"===e.status).length})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-purple-800",children:"Total Art\xedculos"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:e.reduce((e,t)=>e+t.article_count,0)})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(v.A,{className:"h-5 w-5 text-orange-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-orange-800",children:"Este Mes"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-900",children:e.filter(e=>new Date(e.metadata.last_published)>new Date(Date.now()-2592e6)).length})]})]}),(0,a.jsx)(n.A,{data:L,columns:$,actions:I,searchable:!0,searchTerm:_,onSearchChange:S,filters:[{key:"status",label:"Estado",options:[{value:"all",label:"Todos"},{value:"active",label:"Activos"},{value:"inactive",label:"Inactivos"}],value:C,onChange:P}],pagination:{current:E,total:Math.ceil(T.length/10),pageSize:10},onPageChange:A}),(0,a.jsx)(c.lG,{open:b,onOpenChange:j,children:(0,a.jsxs)(c.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(c.c7,{children:(0,a.jsx)(c.L3,{children:N?"Editar Autor":"Nuevo Autor"})}),(0,a.jsx)(l.A,{fields:[{key:"name",label:"Nombre Completo",type:"text",required:!0,validation:{min:2,max:100}},{key:"email",label:"Email",type:"email",required:!0},{key:"role",label:"Rol",type:"text",required:!0,placeholder:"ej. Especialista en Infraestructura"},{key:"bio",label:"Biograf\xeda",type:"textarea",required:!0,validation:{max:500}},{key:"avatar",label:"URL de Avatar",type:"url",placeholder:"https://ejemplo.com/avatar.jpg"},{key:"specialties",label:"Especialidades",type:"tags",required:!0,placeholder:"Escriba especialidades y presione Enter"},{key:"social_links.linkedin",label:"LinkedIn",type:"url",group:"Enlaces Sociales",placeholder:"https://linkedin.com/in/usuario"},{key:"social_links.twitter",label:"Twitter",type:"url",group:"Enlaces Sociales",placeholder:"https://twitter.com/usuario"},{key:"social_links.github",label:"GitHub",type:"url",group:"Enlaces Sociales",placeholder:"https://github.com/usuario"},{key:"social_links.website",label:"Sitio Web Personal",type:"url",group:"Enlaces Sociales",placeholder:"https://mipagina.com"},{key:"status",label:"Estado",type:"select",required:!0,options:[{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"}]}],initialValues:(e=>e?{name:e.name,email:e.email,bio:e.bio,avatar:e.avatar,role:e.role,specialties:e.specialties,"social_links.linkedin":e.social_links.linkedin||"","social_links.twitter":e.social_links.twitter||"","social_links.github":e.social_links.github||"","social_links.website":e.social_links.website||"",status:e.status}:{})(N),onSubmit:R,onCancel:()=>{j(!1),k(null)},submitLabel:N?"Actualizar Autor":"Crear Autor"})]})})]})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},53332:(e,t,r)=>{"use strict";var a=r(43210),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useState,n=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=i({inst:{value:r,getSnapshot:t}}),s=a[0].inst,d=a[1];return l(function(){s.value=r,s.getSnapshot=t,c(s)&&d({inst:s})},[e,r,t]),n(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),o(r),r};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},57379:(e,t,r)=>{"use strict";e.exports=r(53332)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71184:(e,t,r)=>{Promise.resolve().then(r.bind(r,72653))},72653:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/root/proyectos/freelos/metrica/src/app/admin/json-crud/newsletter/authors/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/root/proyectos/freelos/metrica/src/app/admin/json-crud/newsletter/authors/page.tsx","default")},79551:e=>{"use strict";e.exports=require("url")},80912:(e,t,r)=>{Promise.resolve().then(r.bind(r,28843))},86401:(e,t,r)=>{"use strict";async function a(e,t){let r=e.headers.get("content-type");if(!r||!r.includes("application/json")){if(!await e.text())return null;throw Error(`Expected JSON response, got: ${r}`)}try{let t=await e.text();if(!t.trim())return null;return JSON.parse(t)}catch(e){throw Error(`Invalid JSON response from ${t}: ${e instanceof Error?e.message:"Unknown JSON parse error"}`)}}async function s(e,t={}){return fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers||{}}})}r.d(t,{Ay:()=>i});let i={get:async function(e){try{let t=await s(e);if(!t.ok){let e=await t.text();throw Error(`API Error (${t.status}): ${e}`)}return await a(t,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error(`Network error: Failed to fetch from ${e}. Check your internet connection.`);throw t}},post:async function(e,t){try{let r=await s(e,{method:"POST",body:JSON.stringify(t)});if(!r.ok){let e=await r.text();throw Error(`API Error (${r.status}): ${e}`)}return await a(r,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error(`Network error: Failed to post to ${e}. Check your internet connection.`);throw t}},put:async function(e,t){try{let r=await s(e,{method:"PUT",body:JSON.stringify(t)});if(!r.ok){let e=await r.text();throw Error(`API Error (${r.status}): ${e}`)}return await a(r,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error(`Network error: Failed to update ${e}. Check your internet connection.`);throw t}},delete:async function(e){try{let t=await s(e,{method:"DELETE"});if(!t.ok){let e=await t.text();throw Error(`API Error (${t.status}): ${e}`)}if(204===t.status)return null;return await a(t,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error(`Network error: Failed to delete from ${e}. Check your internet connection.`);throw t}},fetch:s}},87976:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=r(65239),s=r(48088),i=r(88170),n=r.n(i),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c={children:["",{children:["admin",{children:["json-crud",{children:["newsletter",{children:["authors",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,72653)),"/root/proyectos/freelos/metrica/src/app/admin/json-crud/newsletter/authors/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,81217)),"/root/proyectos/freelos/metrica/src/app/admin/json-crud/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"/root/proyectos/freelos/metrica/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/root/proyectos/freelos/metrica/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,67393)),"/root/proyectos/freelos/metrica/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/root/proyectos/freelos/metrica/src/app/admin/json-crud/newsletter/authors/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/json-crud/newsletter/authors/page",pathname:"/admin/json-crud/newsletter/authors",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},91821:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>o,TN:()=>c});var a=r(60687),s=r(43210),i=r(24224),n=r(4780);let l=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef(({className:e,variant:t,...r},s)=>(0,a.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(l({variant:t}),e),...r}));o.displayName="Alert",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let c=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4447,4354,1658,5814,1141,7903,1801,3794,263,601,5125,212,5683],()=>r(87976));module.exports=a})();