(()=>{var e={};e.id=4638,e.ids=[4638],e.modules={1060:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=r(65239),o=r(48088),s=r(88170),i=r.n(s),l=r(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let c={children:["",{children:["admin",{children:["json-crud",{children:["portfolio",{children:["projects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3510)),"/root/proyectos/freelos/metrica/src/app/admin/json-crud/portfolio/projects/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,81217)),"/root/proyectos/freelos/metrica/src/app/admin/json-crud/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"/root/proyectos/freelos/metrica/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/root/proyectos/freelos/metrica/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,67393)),"/root/proyectos/freelos/metrica/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/root/proyectos/freelos/metrica/src/app/admin/json-crud/portfolio/projects/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/admin/json-crud/portfolio/projects/page",pathname:"/admin/json-crud/portfolio/projects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1827:(e,t,r)=>{Promise.resolve().then(r.bind(r,66320))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3510:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/root/proyectos/freelos/metrica/src/app/admin/json-crud/portfolio/projects/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/root/proyectos/freelos/metrica/src/app/admin/json-crud/portfolio/projects/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25803:(e,t,r)=>{Promise.resolve().then(r.bind(r,3510))},26398:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82614).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66320:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(60687),o=r(43210),s=r(16189),i=r(86401),l=r(22423),n=r(916),c=r(58595),d=r(26398),p=r(26622),u=r(76311),m=r(35137),y=r(57207),h=r(54052),x=r(14975),f=r(44830),g=r(43034);function b(){let[e,t]=(0,o.useState)([]),[r,b]=(0,o.useState)([]),[v,j]=(0,o.useState)(!0),[w,N]=(0,o.useState)({page:1,limit:20,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),[k,E]=(0,o.useState)({}),[P,C]=(0,o.useState)(""),[A,S]=(0,o.useState)("created_at"),[$,_]=(0,o.useState)("desc"),[q,I]=(0,o.useState)(!1),[T,D]=(0,o.useState)(null),[M,O]=(0,o.useState)(null);(0,s.useSearchParams)(),(0,s.useRouter)();let R=async()=>{j(!0);try{let e=new URLSearchParams({page:w.page.toString(),limit:w.limit.toString(),sort:A,order:$,...P&&{search:P},...k}),r=await i.Ay.get(`/api/admin/portfolio/projects?${e}`);r.success?(t(r.data.projects),b(r.data.categories),N(r.data.pagination)):console.error("Error fetching projects:",r.message)}catch(e){console.error("Error fetching projects:",e)}finally{j(!1)}},z=()=>{D(null),I(!0)},L=async e=>{try{let t=await i.Ay.delete(`/api/admin/portfolio/projects/${e.id}`);t.success?(R(),O(null)):console.error("Error deleting project:",t.message)}catch(e){console.error("Error deleting project:",e)}},U=async e=>{try{let t=T?`/api/admin/portfolio/projects/${T.id}`:"/api/admin/portfolio/projects",r=T?await i.Ay.put(t,e):await i.Ay.post(t,e);if(r.success)R(),I(!1),D(null);else throw Error(r.message||"Error saving project")}catch(e){throw console.error("Error saving project:",e),e}},F=[{key:"featured_image",label:"Imagen",width:"w-20",render:e=>(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gray-200 overflow-hidden",children:e?(0,a.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(l.A,{className:"w-6 h-6 text-gray-400"})})})},{key:"title",label:"T\xedtulo",sortable:!0,render:(e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e}),t.featured&&(0,a.jsx)(n.A,{className:"w-4 h-4 text-yellow-500"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["/",t.slug]})]})},{key:"category_info",label:"Categor\xeda",render:e=>e?(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${e.color}20`,color:e.color},children:e.name}):null},{key:"client",label:"Cliente",render:e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:e||"No especificado"})]})},{key:"location",label:"Ubicaci\xf3n",render:e=>{let t="No especificada";if("string"==typeof e)t=e;else if(e&&"object"==typeof e){let r=[];e.city&&r.push(e.city),e.region&&r.push(e.region),t=r.length>0?r.join(", "):"No especificada"}return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:t})]})}},{key:"status",label:"Estado",render:e=>(0,a.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"active"===e?"bg-green-100 text-green-800":"inactive"===e?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:"active"===e?"Activo":"inactive"===e?"Inactivo":"Borrador"})},{key:"created_at",label:"Creado",sortable:!0,render:e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:new Date(e).toLocaleDateString()})]})}],G=[{label:"Ver",icon:u.A,onClick:e=>window.open(`/portfolio/${e.slug}`,"_blank"),variant:"secondary"},{label:"Editar",icon:m.A,onClick:e=>{D(e),I(!0)},variant:"primary"},{label:"Eliminar",icon:y.A,onClick:e=>O(e),variant:"danger"}],J=[{key:"category",label:"Categor\xeda",type:"select",options:r.map(e=>({value:e.id,label:e.name}))},{key:"status",label:"Estado",type:"select",options:[{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"draft",label:"Borrador"}]},{key:"featured",label:"Destacado",type:"select",options:[{value:"true",label:"S\xed"},{value:"false",label:"No"}]}],B=[{key:"title",label:"T\xedtulo",type:"text",required:!0,placeholder:"Nombre del proyecto...",group:"basic"},{key:"slug",label:"Slug",type:"text",placeholder:"Se genera autom\xe1ticamente si se deja vac\xedo",description:"URL amigable para el proyecto",group:"basic"},{key:"description",label:"Descripci\xf3n",type:"textarea",required:!0,placeholder:"Descripci\xf3n del proyecto...",group:"basic"},{key:"category",label:"Categor\xeda",type:"select",required:!0,options:r.map(e=>({value:e.id,label:e.name})),group:"basic"},{key:"status",label:"Estado",type:"select",required:!0,options:[{value:"draft",label:"Borrador"},{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"}],defaultValue:"draft",group:"basic"},{key:"featured",label:"Proyecto Destacado",type:"checkbox",description:"Los proyectos destacados aparecen en posiciones prominentes",group:"basic"},{key:"featured_image",label:"Imagen Principal",type:"url",placeholder:"https://ejemplo.com/imagen.jpg",group:"media"},{key:"gallery",label:"Galer\xeda de Im\xe1genes",type:"tags",placeholder:"URLs de im\xe1genes separadas por comas",description:"Lista de URLs de im\xe1genes para la galer\xeda del proyecto",group:"media"},{key:"client",label:"Cliente",type:"text",placeholder:"Nombre del cliente...",group:"details"},{key:"location",label:"Ubicaci\xf3n",type:"text",placeholder:"Ciudad, Regi\xf3n...",group:"details"},{key:"start_date",label:"Fecha de Inicio",type:"date",group:"details"},{key:"end_date",label:"Fecha de Finalizaci\xf3n",type:"date",group:"details"},{key:"investment",label:"Inversi\xf3n",type:"text",placeholder:"Ej: $2.5M USD",group:"details"},{key:"area",label:"\xc1rea",type:"text",placeholder:"Ej: 15,000 m\xb2",group:"details"},{key:"tags",label:"Etiquetas",type:"tags",placeholder:"Separar con comas...",description:"Etiquetas para categorizaci\xf3n y b\xfasqueda",group:"meta"},{key:"order",label:"Orden de Visualizaci\xf3n",type:"number",placeholder:"0",description:"Menor n\xfamero = mayor prioridad",group:"meta"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Proyectos del Portfolio"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Gestiona todos los proyectos que aparecen en el portfolio de la empresa."})]}),(0,a.jsx)(f.A,{data:e,columns:F,actions:G,filters:J,loading:v,pagination:w,onPageChange:e=>N(t=>({...t,page:e})),onLimitChange:e=>N(t=>({...t,limit:e,page:1})),onSortChange:(e,t)=>{S(e),_(t)},onFilterChange:E,onSearch:C,searchPlaceholder:"Buscar proyectos...",title:"Proyectos",subtitle:`${w.total} proyectos en total`,primaryAction:{label:"Nuevo Proyecto",onClick:z,icon:h.A},emptyState:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(l.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay proyectos"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando tu primer proyecto del portfolio."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("button",{onClick:z,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Nuevo Proyecto"]})})]})}),q&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:(0,a.jsx)(g.A,{fields:B,groups:[{name:"basic",label:"Informaci\xf3n B\xe1sica",description:"Datos fundamentales del proyecto"},{name:"media",label:"Medios y Recursos",description:"Im\xe1genes y recursos visuales"},{name:"details",label:"Detalles del Proyecto",description:"Informaci\xf3n espec\xedfica y fechas"},{name:"meta",label:"Metadatos",description:"Configuraci\xf3n adicional y SEO",collapsible:!0,defaultExpanded:!1}],initialValues:T||{},onSubmit:U,onCancel:()=>{I(!1),D(null)},title:T?"Editar Proyecto":"Nuevo Proyecto",subtitle:T?"Modifica los datos del proyecto":"Crea un nuevo proyecto para el portfolio",mode:T?"edit":"create"})})}),M&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(x.A,{className:"w-6 h-6 text-red-600 mr-3"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmar Eliminaci\xf3n"})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:['\xbfEst\xe1s seguro de que deseas eliminar el proyecto "',(0,a.jsx)("strong",{children:M.title}),'"? Esta acci\xf3n no se puede deshacer.']}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>O(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancelar"}),(0,a.jsx)("button",{onClick:()=>L(M),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md",children:"Eliminar"})]})]})})})]})}},79551:e=>{"use strict";e.exports=require("url")},86401:(e,t,r)=>{"use strict";async function a(e,t){let r=e.headers.get("content-type");if(!r||!r.includes("application/json")){if(!await e.text())return null;throw Error(`Expected JSON response, got: ${r}`)}try{let t=await e.text();if(!t.trim())return null;return JSON.parse(t)}catch(e){throw Error(`Invalid JSON response from ${t}: ${e instanceof Error?e.message:"Unknown JSON parse error"}`)}}async function o(e,t={}){return fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers||{}}})}r.d(t,{Ay:()=>s});let s={get:async function(e){try{let t=await o(e);if(!t.ok){let e=await t.text();throw Error(`API Error (${t.status}): ${e}`)}return await a(t,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error(`Network error: Failed to fetch from ${e}. Check your internet connection.`);throw t}},post:async function(e,t){try{let r=await o(e,{method:"POST",body:JSON.stringify(t)});if(!r.ok){let e=await r.text();throw Error(`API Error (${r.status}): ${e}`)}return await a(r,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error(`Network error: Failed to post to ${e}. Check your internet connection.`);throw t}},put:async function(e,t){try{let r=await o(e,{method:"PUT",body:JSON.stringify(t)});if(!r.ok){let e=await r.text();throw Error(`API Error (${r.status}): ${e}`)}return await a(r,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error(`Network error: Failed to update ${e}. Check your internet connection.`);throw t}},delete:async function(e){try{let t=await o(e,{method:"DELETE"});if(!t.ok){let e=await t.text();throw Error(`API Error (${t.status}): ${e}`)}if(204===t.status)return null;return await a(t,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error(`Network error: Failed to delete from ${e}. Check your internet connection.`);throw t}},fetch:o}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4447,4354,1658,5814,1141,7903,1801,3794,263,601,5125,212,5683],()=>r(1060));module.exports=a})();