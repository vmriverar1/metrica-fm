(()=>{var e={};e.id=2116,e.ids=[2116],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3544:(e,r,t)=>{Promise.resolve().then(t.bind(t,61193))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11003:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20659:(e,r,t)=>{Promise.resolve().then(t.bind(t,76158))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},38765:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},46978:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=t(65239),a=t(48088),i=t(88170),n=t.n(i),o=t(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let c={children:["",{children:["admin",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,76158)),"/root/proyectos/freelos/metrica/src/app/admin/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,99111)),"/root/proyectos/freelos/metrica/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/root/proyectos/freelos/metrica/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,67393)),"/root/proyectos/freelos/metrica/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/root/proyectos/freelos/metrica/src/app/admin/login/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/login/page",pathname:"/admin/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},53597:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},54716:(e,r,t)=>{"use strict";t.d(r,{OJ:()=>u,As:()=>m,ru:()=>p});var s=t(60687),a=t(43210);let i={id:"1",email:"admin@metrica.pe",firstName:"Admin",lastName:"Usuario",avatar:"",role:{id:"admin",name:"Administrador",description:"Acceso completo al sistema",level:1,permissions:[{id:"admin-all",name:"Administrar todo",resource:"*",action:"*"}]},department:"Tecnolog\xeda",permissions:[],isActive:!0,lastLogin:new Date,createdAt:new Date,updatedAt:new Date,preferences:{theme:"light",language:"es",timezone:"America/Lima",notifications:{email:!0,browser:!0,digest:"daily"},dashboard:{layout:"default",widgets:[]}},twoFactorEnabled:!1},n={id:"session-1",userId:"1",token:"mock-token",refreshToken:"mock-refresh-token",expiresAt:new Date(Date.now()+864e5),createdAt:new Date,lastActivity:new Date,userAgent:"Mock Browser",ipAddress:"127.0.0.1"};class o{static async login(e){if(await new Promise(e=>setTimeout(e,1e3)),"admin@metrica.pe"===e.email&&"admin123"===e.password)return{user:i,session:n};throw Error("Credenciales inv\xe1lidas")}static async logout(){await new Promise(e=>setTimeout(e,500))}static async refreshToken(e){return await new Promise(e=>setTimeout(e,500)),{...n,token:"new-mock-token"}}static async getCurrentUser(){return null}static getCurrentUserSync(){return null}static async updateUserPreferences(e,r){return{...i,preferences:{...i.preferences,...r}}}static hasPermission(e,r,t){return 1===e.role.level}static canAccess(e,r,t){return 1===e.role.level}static async initializeFromStorage(){return!1}static getCurrentSession(){return null}static getCurrentSessionSync(){return null}static async devAutoLogin(){return!1}}let l={user:null,session:null,isAuthenticated:!1,isLoading:!0,error:null,requiresTwoFactor:!1};function c(e,r){switch(r.type){case"LOGIN_START":return{...e,isLoading:!0,error:null,requiresTwoFactor:!1};case"LOGIN_SUCCESS":return{...e,user:r.payload.user,session:r.payload.session,isAuthenticated:!0,isLoading:!1,error:null,requiresTwoFactor:!1};case"LOGIN_ERROR":return{...e,user:null,session:null,isAuthenticated:!1,isLoading:!1,error:r.payload,requiresTwoFactor:!1};case"LOGIN_REQUIRES_2FA":return{...e,isLoading:!1,error:null,requiresTwoFactor:!0};case"LOGOUT":return{...e,user:null,session:null,isAuthenticated:!1,isLoading:!1,error:null,requiresTwoFactor:!1};case"REFRESH_TOKEN":return{...e,session:r.payload,error:null};case"CLEAR_ERROR":return{...e,error:null,requiresTwoFactor:!1};case"SET_LOADING":return{...e,isLoading:r.payload};case"UPDATE_USER":return{...e,user:r.payload};default:return e}}let d=(0,a.createContext)(null);function u({children:e}){let[r,t]=(0,a.useReducer)(c,l),i={...r,actions:{async login(e){t({type:"LOGIN_START"});try{let r=await o.login(e);if(r&&r.user&&r.session)return t({type:"LOGIN_SUCCESS",payload:{user:r.user,session:r.session}}),!0;return t({type:"LOGIN_ERROR",payload:"Error de autenticaci\xf3n"}),!1}catch(e){return t({type:"LOGIN_ERROR",payload:e instanceof Error?e.message:"Error interno"}),!1}},async logout(){await o.logout(),t({type:"LOGOUT"})},async refreshToken(){try{let e=await o.refreshToken(r.session?.refreshToken||"");e?t({type:"REFRESH_TOKEN",payload:e}):t({type:"LOGOUT"})}catch(e){console.error("Error refreshing token:",e),t({type:"LOGOUT"})}},clearError(){t({type:"CLEAR_ERROR"})},hasPermission:(e,t)=>o.hasPermission({resource:e,action:t},r.user||void 0),canAccess:(e,r="read")=>o.canAccess(e,r),async updateUserPreferences(e){if(r.user)try{let s=await o.updateUser(r.user.id,{preferences:{...r.user.preferences,...e}});t({type:"UPDATE_USER",payload:s})}catch(e){throw console.error("Error updating user preferences:",e),e}}}};return(0,s.jsx)(d.Provider,{value:i,children:e})}function m(){let e=(0,a.useContext)(d);if(!e)throw Error("useAuth debe ser usado dentro de AuthProvider");return e}function p(e){return function(r){let{isAuthenticated:t,isLoading:a}=m();return a?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):t?(0,s.jsx)(e,{...r}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acceso Requerido"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Debes iniciar sesi\xf3n para acceder a esta p\xe1gina."})]})})}}},57611:(e,r,t)=>{Promise.resolve().then(t.bind(t,84866))},61193:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(60687),a=t(54716);function i({children:e}){return(0,s.jsx)(a.OJ,{children:e})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},72963:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},76158:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/root/proyectos/freelos/metrica/src/app/admin/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/root/proyectos/freelos/metrica/src/app/admin/login/page.tsx","default")},76311:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},79551:e=>{"use strict";e.exports=require("url")},84866:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var s=t(60687),a=t(43210),i=t(54716),n=t(53597),o=t(11003),l=t(76311),c=t(72963),d=t(38765);let u=(0,t(82614).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var m=t(16189);function p(){let{actions:e,error:r,isLoading:t,requiresTwoFactor:p,isAuthenticated:x}=(0,i.As)(),h=(0,m.useRouter)(),[y,f]=(0,a.useState)({email:"admin@metrica.pe",password:"admin123",rememberMe:!1,twoFactorCode:""}),[g,b]=(0,a.useState)(!1),[w,v]=(0,a.useState)(!1),j=async r=>{r.preventDefault(),v(!0);try{await e.login({email:y.email,password:y.password,rememberMe:y.rememberMe,twoFactorCode:y.twoFactorCode||void 0})&&h.push("/admin/json-crud")}catch(e){console.error("Login error:",e)}finally{v(!1)}},A=e=>{let{name:r,value:t,type:s,checked:a}=e.target;f(e=>({...e,[r]:"checkbox"===s?a:t}))};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-white to-accent/5 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-primary to-accent rounded-full mb-4",children:(0,s.jsx)(n.A,{className:"w-8 h-8 text-white"})}),(0,s.jsxs)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:[(0,s.jsx)("span",{className:"font-['Marsek_Demi'] text-primary",children:"M\xe9trica"}),(0,s.jsx)("span",{className:"text-accent ml-1",children:"DIP"})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Panel de Administraci\xf3n"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,s.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electr\xf3nico"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:y.email,onChange:A,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors",placeholder:"tu@metrica.pe"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase\xf1a"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:g?"text":"password",id:"password",name:"password",value:y.password,onChange:A,required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors",placeholder:"••••••••"}),(0,s.jsx)("button",{type:"button",onClick:()=>b(!g),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:g?(0,s.jsx)(o.A,{size:20}):(0,s.jsx)(l.A,{size:20})})]})]}),p&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"C\xf3digo de Verificaci\xf3n (2FA)"}),(0,s.jsx)("input",{type:"text",id:"twoFactorCode",name:"twoFactorCode",value:y.twoFactorCode,onChange:A,maxLength:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors text-center tracking-wider",placeholder:"123456"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Ingresa el c\xf3digo de 6 d\xedgitos de tu aplicaci\xf3n de autenticaci\xf3n"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"rememberMe",name:"rememberMe",checked:y.rememberMe,onChange:A,className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),(0,s.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 text-sm text-gray-700",children:"Recordar mi sesi\xf3n por 30 d\xedas"})]}),r&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm text-red-700",children:r})]}),p&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,s.jsx)(d.A,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm text-blue-700",children:"Credenciales correctas. Ingresa tu c\xf3digo de verificaci\xf3n."})]}),(0,s.jsx)("button",{type:"submit",disabled:w||t,className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:w||t?(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:p?"Verificar C\xf3digo":"Iniciar Sesi\xf3n"})]})})]}),!1]}),(0,s.jsx)("div",{className:"text-center mt-8 text-sm text-gray-500",children:(0,s.jsx)("p",{children:"\xa9 2024 M\xe9trica DIP. Sistema seguro de gesti\xf3n empresarial."})})]})})}},93816:(e,r,t)=>{Promise.resolve().then(t.bind(t,99111))},99111:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/root/proyectos/freelos/metrica/src/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/root/proyectos/freelos/metrica/src/app/admin/layout.tsx","default")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,4354,1658,5125],()=>t(46978));module.exports=s})();