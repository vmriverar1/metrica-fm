(()=>{var e={};e.id=2772,e.ids=[2772],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},56187:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>m,serverHooks:()=>w,workAsyncStorage:()=>y,workUnitAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{GET:()=>p,HEAD:()=>l});var o=t(96559),a=t(48088),n=t(37719),c=t(32190),i=t(29021),u=t(33873);async function p(e){try{let e,r=Date.now(),t=process.memoryUsage(),s=process.uptime(),o="1.0.0";try{o=JSON.parse((0,i.readFileSync)((0,u.join)(process.cwd(),"package.json"),"utf8")).version||"1.0.0"}catch(e){console.warn("Could not read package.json for version")}let a={database:await h(),filesystem:await d(),memory:function(e){try{let r=e.heapUsed/1024/1024;e.heapTotal;let t=heapUsed/heapTotal*100;if(t>90||r>1024)return"down";if(t>70||r>512)return"degraded";return"up"}catch(e){return console.error("Memory health check error:",e),"degraded"}}(t)},n=Object.values(a).every(e=>"up"===e),p=Object.values(a).some(e=>"down"===e),l={status:e=n?"healthy":p?"unhealthy":"degraded",timestamp:new Date().toISOString(),version:o,uptime:s,environment:"production",services:a,metrics:{memoryUsage:t,uptime:s,timestamp:new Date().toISOString(),nodeVersion:process.version,platform:process.platform,architecture:process.arch}},m=c.NextResponse.json(l,{status:"healthy"===e||"degraded"===e?200:503});return m.headers.set("Cache-Control","no-cache, no-store, must-revalidate"),m.headers.set("X-Health-Check-Duration",`${Date.now()-r}ms`),m.headers.set("X-Environment","production"),m.headers.set("X-Version",o),m}catch(r){console.error("Health check error:",r);let e={status:"unhealthy",timestamp:new Date().toISOString(),error:"Health check failed",message:r instanceof Error?r.message:"Unknown error"};return c.NextResponse.json(e,{status:503,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","X-Health-Check-Error":"true"}})}}async function h(){try{let e=[(0,u.join)(process.cwd(),"public/json/pages/home.json"),(0,u.join)(process.cwd(),"public/json/pages/portfolio.json"),(0,u.join)(process.cwd(),"public/json/pages/careers.json")],r=0;for(let t of e)try{(0,i.readFileSync)(t,"utf8"),r++}catch(e){}if(r===e.length)return"up";if(r>0)return"degraded";return"down"}catch(e){return console.error("Database health check error:",e),"down"}}async function d(){try{let e=[(0,u.join)(process.cwd(),"public"),(0,u.join)(process.cwd(),"public/json"),(0,u.join)(process.cwd(),"src")],r=0;for(let s of e)try{await Promise.resolve().then(t.t.bind(t,29021,23)).then(e=>e.promises.access(s,e.constants.R_OK)),r++}catch(e){}if(r===e.length)return"up";if(r>0)return"degraded";return"down"}catch(e){return console.error("Filesystem health check error:",e),"down"}}async function l(e){try{let e=process.memoryUsage().heapUsed/1024/1024,r=e<1024;return new c.NextResponse(null,{status:r?200:503,headers:{"X-Health-Status":r?"healthy":"unhealthy","X-Memory-Usage":`${e.toFixed(2)}MB`,"Cache-Control":"no-cache"}})}catch(e){return new c.NextResponse(null,{status:503,headers:{"X-Health-Status":"error","X-Health-Error":"true"}})}}let m=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/health/route",pathname:"/api/health",filename:"route",bundlePath:"app/api/health/route"},resolvedPagePath:"/root/proyectos/freelos/metrica/src/app/api/health/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:y,workUnitAsyncStorage:f,serverHooks:w}=m;function g(){return(0,n.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:f})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580],()=>t(56187));module.exports=s})();