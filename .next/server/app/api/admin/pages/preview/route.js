(()=>{var e={};e.id=7195,e.ids=[7195],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65602:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>f,routeModule:()=>g,serverHooks:()=>m,workAsyncStorage:()=>y,workUnitAsyncStorage:()=>x});var t={};s.r(t),s.d(t,{DELETE:()=>v,POST:()=>d});var i=s(96559),o=s(48088),a=s(37719),n=s(32190),c=s(79748),p=s.n(c),l=s(33873),u=s.n(l);async function d(e){try{let{component:r,data:s,timestamp:t}=await e.json();if(!r||!s)return n.NextResponse.json({error:"Componente y datos son requeridos"},{status:400});let i=u().join(process.cwd(),"temp","previews");try{await p().mkdir(i,{recursive:!0})}catch(e){}let o=`${r.toLowerCase()}_${t}_${Math.random().toString(36).substr(2,9)}`,a=u().join(i,`${o}.json`),c=await w(r,s);await p().writeFile(a,JSON.stringify({component:r,data:c,timestamp:t,expiresAt:Date.now()+6e5},null,2));let l=`/preview/${o}`;return setTimeout(async()=>{try{await p().unlink(a)}catch(e){console.log(`Preview file ${o} already cleaned up`)}},6e5),n.NextResponse.json({success:!0,previewId:o,previewUrl:l,expiresAt:Date.now()+6e5})}catch(e){return console.error("Preview generation error:",e),n.NextResponse.json({error:"Error interno del servidor"},{status:500})}}async function w(e,r){var s,t,i,o;switch(e){case"HomePage":return s=r,{page:{title:s.page?.title||"M\xe9trica DIP - Preview",description:s.page?.description||"Preview de la p\xe1gina principal"},hero:{title:s.hero?.title||{main:"Preview",secondary:"Mode"},subtitle:s.hero?.subtitle||"Vista previa temporal",rotating_words:Array.isArray(s.hero?.rotating_words)?s.hero.rotating_words:["Innovaci\xf3n","Calidad","Excelencia"],background:s.hero?.background||{},cta:s.hero?.cta||{text:"Ver m\xe1s",link:"#"}},stats:{section:s.stats?.section||{},statistics:Array.isArray(s.stats?.statistics)?s.stats.statistics:[]},services:{section:s.services?.section||{},main_service:s.services?.main_service||{},secondary_services:Array.isArray(s.services?.secondary_services)?s.services.secondary_services:[]},portfolio:{section:s.portfolio?.section||{},featured_projects:Array.isArray(s.portfolio?.featured_projects)?s.portfolio.featured_projects:[]},pillars:{section:s.pillars?.section||{},pillars:Array.isArray(s.pillars?.pillars)?s.pillars.pillars:[]},policies:{section:s.policies?.section||{},policies:Array.isArray(s.policies?.policies)?s.policies.policies:[]},newsletter:s.newsletter||{}};case"BlogPage":return{page:(t=r).page||{},hero:t.hero||{},filters:t.filters||{},posts:Array.isArray(t.posts)?t.posts:[]};case"PortfolioPage":return{page:(i=r).page||{},hero:i.hero||{},filters:i.filters||{},projects:Array.isArray(i.projects)?i.projects:[]};case"AboutPage":return{page:(o=r).page||{},hero:o.hero||{},sections:o.sections||{}};default:return r}}async function v(){try{let e=u().join(process.cwd(),"temp","previews");try{let r=await p().readdir(e),s=Date.now(),t=0;for(let i of r){if(!i.endsWith(".json"))continue;let r=u().join(e,i);try{let e=await p().readFile(r,"utf-8"),i=JSON.parse(e);i.expiresAt&&i.expiresAt<s&&(await p().unlink(r),t++)}catch(e){await p().unlink(r),t++}}return n.NextResponse.json({success:!0,message:`${t} previews expirados eliminados`})}catch(e){return n.NextResponse.json({success:!0,message:"Directorio de previews no existe"})}}catch(e){return console.error("Preview cleanup error:",e),n.NextResponse.json({error:"Error limpiando previews"},{status:500})}}let g=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/admin/pages/preview/route",pathname:"/api/admin/pages/preview",filename:"route",bundlePath:"app/api/admin/pages/preview/route"},resolvedPagePath:"/root/proyectos/freelos/metrica/src/app/api/admin/pages/preview/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:y,workUnitAsyncStorage:x,serverHooks:m}=g;function f(){return(0,a.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:x})}},78335:()=>{},79748:e=>{"use strict";e.exports=require("fs/promises")},96487:()=>{}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[4447,580],()=>s(65602));module.exports=t})();