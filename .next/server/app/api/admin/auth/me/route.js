"use strict";(()=>{var e={};e.id=9401,e.ids=[9401],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27910:e=>{e.exports=require("stream")},28354:e=>{e.exports=require("util")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},60390:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>A,routeModule:()=>m,serverHooks:()=>v,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{GET:()=>c,OPTIONS:()=>l});var a=t(96559),o=t(48088),i=t(37719),n=t(32190),u=t(66321),p=t(20108),d=t(31075);async function c(e){try{let r=await (0,u.W0)(e);if(!r||!r.isAuthenticated)return n.NextResponse.json({success:!1,error:"NOT_AUTHENTICATED",message:"Authentication required."},{status:401});let{user:t,session:s}=r,a=p.E.getUserPermissions(t),o=p.E.getAvailableResources(),i={id:t.id,email:t.email,name:t.name,role:t.role,status:t.status,last_login:t.last_login,created_at:t.created_at,metadata:t.metadata||{}},d={id:s.sessionId,created_at:s.created_at,expires_at:s.expires_at,ip_address:s.ip_address};return n.NextResponse.json({success:!0,data:{user:i,session:d,permissions:a.map(e=>({resource:e.resource,action:e.action,description:e.description})),available_resources:Object.entries(o).map(([e,r])=>({id:e,name:r.name,description:r.description,actions:r.actions}))}})}catch(e){return await d.vF.error("auth-api","Me endpoint error",e),n.NextResponse.json({success:!1,error:"INTERNAL_ERROR",message:"Internal server error."},{status:500})}}async function l(){return new n.NextResponse(null,{status:200,headers:{Allow:"GET, OPTIONS","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}let m=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/admin/auth/me/route",pathname:"/api/admin/auth/me",filename:"route",bundlePath:"app/api/admin/auth/me/route"},resolvedPagePath:"/root/proyectos/freelos/metrica/src/app/api/admin/auth/me/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:h,serverHooks:v}=m;function A(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:h})}},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{e.exports=require("buffer")},79748:e=>{e.exports=require("fs/promises")},94735:e=>{e.exports=require("events")}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580,3205,1220,6321],()=>t(60390));module.exports=s})();