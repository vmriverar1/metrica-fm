(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{4607:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},11133:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},16636:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var a=t(95155),s=t(12115),n=t(48152),i=t(45731),o=t(4607),l=t(17607),c=t(11133),d=t(58127);let u=(0,t(40157).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var m=t(35695);function h(){let{actions:e,error:r,isLoading:t,requiresTwoFactor:h,isAuthenticated:p}=(0,n.As)(),y=(0,m.useRouter)(),[g,x]=(0,s.useState)({email:"admin@metrica.pe",password:"admin123",rememberMe:!1,twoFactorCode:""}),[f,w]=(0,s.useState)(!1),[b,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{p&&!t&&y.push("/admin/json-crud")},[p,t,y]);let v=async r=>{r.preventDefault(),k(!0);try{await e.login({email:g.email,password:g.password,rememberMe:g.rememberMe,twoFactorCode:g.twoFactorCode||void 0})&&y.push("/admin/json-crud")}catch(e){console.error("Login error:",e)}finally{k(!1)}},N=e=>{let{name:r,value:t,type:a,checked:s}=e.target;x(e=>({...e,[r]:"checkbox"===a?s:t}))};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-white to-accent/5 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-primary to-accent rounded-full mb-4",children:(0,a.jsx)(i.A,{className:"w-8 h-8 text-white"})}),(0,a.jsxs)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:[(0,a.jsx)("span",{className:"font-['Marsek_Demi'] text-primary",children:"M\xe9trica"}),(0,a.jsx)("span",{className:"text-accent ml-1",children:"DIP"})]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Panel de Administraci\xf3n"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electr\xf3nico"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:g.email,onChange:N,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors",placeholder:"tu@metrica.pe"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:f?"text":"password",id:"password",name:"password",value:g.password,onChange:N,required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors",placeholder:"••••••••"}),(0,a.jsx)("button",{type:"button",onClick:()=>w(!f),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:f?(0,a.jsx)(o.A,{size:20}):(0,a.jsx)(l.A,{size:20})})]})]}),h&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"C\xf3digo de Verificaci\xf3n (2FA)"}),(0,a.jsx)("input",{type:"text",id:"twoFactorCode",name:"twoFactorCode",value:g.twoFactorCode,onChange:N,maxLength:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors text-center tracking-wider",placeholder:"123456"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Ingresa el c\xf3digo de 6 d\xedgitos de tu aplicaci\xf3n de autenticaci\xf3n"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"rememberMe",name:"rememberMe",checked:g.rememberMe,onChange:N,className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),(0,a.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 text-sm text-gray-700",children:"Recordar mi sesi\xf3n por 30 d\xedas"})]}),r&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm text-red-700",children:r})]}),h&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm text-blue-700",children:"Credenciales correctas. Ingresa tu c\xf3digo de verificaci\xf3n."})]}),(0,a.jsx)("button",{type:"submit",disabled:b||t,className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b||t?(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:h?"Verificar C\xf3digo":"Iniciar Sesi\xf3n"})]})})]}),!1]}),(0,a.jsx)("div",{className:"text-center mt-8 text-sm text-gray-500",children:(0,a.jsx)("p",{children:"\xa9 2024 M\xe9trica DIP. Sistema seguro de gesti\xf3n empresarial."})})]})})}},17607:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},35695:(e,r,t)=>{"use strict";var a=t(18999);t.o(a,"notFound")&&t.d(r,{notFound:function(){return a.notFound}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},40157:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:r,...i,width:s,height:s,stroke:t,strokeWidth:l?24*Number(o)/Number(s):o,className:n("lucide",c),...m},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),l=(e,r)=>{let t=(0,a.forwardRef)((t,i)=>{let{className:l,...c}=t;return(0,a.createElement)(o,{ref:i,iconNode:r,className:n("lucide-".concat(s(e)),l),...c})});return t.displayName="".concat(e),t}},45731:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},46037:(e,r,t)=>{Promise.resolve().then(t.bind(t,16636))},48152:(e,r,t)=>{"use strict";t.d(r,{OJ:()=>u,As:()=>m,ru:()=>h});var a=t(95155),s=t(12115);let n={id:"1",email:"admin@metrica.pe",firstName:"Admin",lastName:"Usuario",avatar:"",role:{id:"admin",name:"Administrador",description:"Acceso completo al sistema",level:1,permissions:[{id:"admin-all",name:"Administrar todo",resource:"*",action:"*"}]},department:"Tecnolog\xeda",permissions:[],isActive:!0,lastLogin:new Date,createdAt:new Date,updatedAt:new Date,preferences:{theme:"light",language:"es",timezone:"America/Lima",notifications:{email:!0,browser:!0,digest:"daily"},dashboard:{layout:"default",widgets:[]}},twoFactorEnabled:!1},i={id:"session-1",userId:"1",token:"mock-token",refreshToken:"mock-refresh-token",expiresAt:new Date(Date.now()+864e5),createdAt:new Date,lastActivity:new Date,userAgent:"Mock Browser",ipAddress:"127.0.0.1"};class o{static async login(e){if(await new Promise(e=>setTimeout(e,1e3)),"admin@metrica.pe"===e.email&&"admin123"===e.password)return localStorage.setItem("auth-token","mock-token"),localStorage.setItem("auth-user",JSON.stringify(n)),{user:n,session:i};throw Error("Credenciales inv\xe1lidas")}static async logout(){localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),await new Promise(e=>setTimeout(e,500))}static async refreshToken(e){return await new Promise(e=>setTimeout(e,500)),{...i,token:"new-mock-token"}}static async getCurrentUser(){let e=localStorage.getItem("auth-token"),r=localStorage.getItem("auth-user");if("mock-token"===e&&r)try{return JSON.parse(r)}catch(e){}return null}static getCurrentUserSync(){var e,r;let t=null==(e=localStorage)?void 0:e.getItem("auth-token"),a=null==(r=localStorage)?void 0:r.getItem("auth-user");if("mock-token"===t&&a)try{return JSON.parse(a)}catch(e){}return null}static async updateUserPreferences(e,r){return{...n,preferences:{...n.preferences,...r}}}static hasPermission(e,r,t){return 1===e.role.level}static canAccess(e,r,t){return 1===e.role.level}static async initializeFromStorage(){var e;return"mock-token"===(null==(e=localStorage)?void 0:e.getItem("auth-token"))}static getCurrentSession(){var e;return"mock-token"===(null==(e=localStorage)?void 0:e.getItem("auth-token"))?i:null}static getCurrentSessionSync(){var e;return"mock-token"===(null==(e=localStorage)?void 0:e.getItem("auth-token"))?i:null}static async devAutoLogin(){var e;return"mock-token"===(null==(e=localStorage)?void 0:e.getItem("auth-token"))}}let l={user:null,session:null,isAuthenticated:!1,isLoading:!0,error:null,requiresTwoFactor:!1};function c(e,r){switch(r.type){case"LOGIN_START":return{...e,isLoading:!0,error:null,requiresTwoFactor:!1};case"LOGIN_SUCCESS":return{...e,user:r.payload.user,session:r.payload.session,isAuthenticated:!0,isLoading:!1,error:null,requiresTwoFactor:!1};case"LOGIN_ERROR":return{...e,user:null,session:null,isAuthenticated:!1,isLoading:!1,error:r.payload,requiresTwoFactor:!1};case"LOGIN_REQUIRES_2FA":return{...e,isLoading:!1,error:null,requiresTwoFactor:!0};case"LOGOUT":return{...e,user:null,session:null,isAuthenticated:!1,isLoading:!1,error:null,requiresTwoFactor:!1};case"REFRESH_TOKEN":return{...e,session:r.payload,error:null};case"CLEAR_ERROR":return{...e,error:null,requiresTwoFactor:!1};case"SET_LOADING":return{...e,isLoading:r.payload};case"UPDATE_USER":return{...e,user:r.payload};default:return e}}let d=(0,s.createContext)(null);function u(e){let{children:r}=e,[t,n]=(0,s.useReducer)(c,l);(0,s.useEffect)(()=>{(async()=>{n({type:"SET_LOADING",payload:!0});try{if(await o.initializeFromStorage()){let e=await o.getCurrentUser(),r=o.getCurrentSession();e&&r?n({type:"LOGIN_SUCCESS",payload:{user:e,session:r}}):n({type:"LOGOUT"})}else n({type:"LOGOUT"})}catch(e){console.error("Error initializing auth:",e),n({type:"LOGOUT"})}finally{n({type:"SET_LOADING",payload:!1})}})()},[]),(0,s.useEffect)(()=>{if(!t.isAuthenticated||!t.session)return;let e=setInterval(async()=>{try{var e;let r=await o.refreshToken((null==(e=t.session)?void 0:e.refreshToken)||"");r?n({type:"REFRESH_TOKEN",payload:r}):n({type:"LOGOUT"})}catch(e){console.error("Error refreshing token:",e),n({type:"LOGOUT"})}},3e5);return()=>clearInterval(e)},[t.isAuthenticated,t.session]);let i={...t,actions:{async login(e){n({type:"LOGIN_START"});try{let r=await o.login(e);if(r&&r.user&&r.session)return n({type:"LOGIN_SUCCESS",payload:{user:r.user,session:r.session}}),!0;return n({type:"LOGIN_ERROR",payload:"Error de autenticaci\xf3n"}),!1}catch(e){return n({type:"LOGIN_ERROR",payload:e instanceof Error?e.message:"Error interno"}),!1}},async logout(){await o.logout(),n({type:"LOGOUT"})},async refreshToken(){try{var e;let r=await o.refreshToken((null==(e=t.session)?void 0:e.refreshToken)||"");r?n({type:"REFRESH_TOKEN",payload:r}):n({type:"LOGOUT"})}catch(e){console.error("Error refreshing token:",e),n({type:"LOGOUT"})}},clearError(){n({type:"CLEAR_ERROR"})},hasPermission:(e,r)=>o.hasPermission({resource:e,action:r},t.user||void 0),canAccess(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return o.canAccess(e,r)},async updateUserPreferences(e){if(t.user)try{let r=await o.updateUser(t.user.id,{preferences:{...t.user.preferences,...e}});n({type:"UPDATE_USER",payload:r})}catch(e){throw console.error("Error updating user preferences:",e),e}}}};return(0,a.jsx)(d.Provider,{value:i,children:r})}function m(){let e=(0,s.useContext)(d);if(!e)throw Error("useAuth debe ser usado dentro de AuthProvider");return e}function h(e){return function(r){let{isAuthenticated:t,isLoading:s}=m();return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):t?(0,a.jsx)(e,{...r}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acceso Requerido"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Debes iniciar sesi\xf3n para acceder a esta p\xe1gina."})]})})}}},58127:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[8441,1684,7358],()=>r(46037)),_N_E=e.O()}]);