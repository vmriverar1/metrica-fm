(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4638],{35695:(e,t,a)=>{"use strict";var r=a(18999);a.o(r,"notFound")&&a.d(t,{notFound:function(){return r.notFound}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},65360:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(95155),o=a(12115),s=a(35695),l=a(90697),c=a(83173),i=a(30462),n=a(91721),d=a(83662),u=a(51920),p=a(17607),m=a(18763),y=a(77223),h=a(18046),g=a(31949),x=a(75676),f=a(62543);function b(){let[e,t]=(0,o.useState)([]),[a,b]=(0,o.useState)([]),[w,v]=(0,o.useState)(!0),[j,N]=(0,o.useState)({page:1,limit:20,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),[k,E]=(0,o.useState)({}),[S,C]=(0,o.useState)(""),[A,P]=(0,o.useState)("created_at"),[I,_]=(0,o.useState)("desc"),[F,O]=(0,o.useState)(!1),[q,D]=(0,o.useState)(null),[R,T]=(0,o.useState)(null),U=(0,s.useSearchParams)();(0,s.useRouter)(),(0,o.useEffect)(()=>{"create"===U.get("action")&&O(!0)},[U]),(0,o.useEffect)(()=>{L()},[j.page,j.limit,k,S,A,I]);let L=async()=>{v(!0);try{let e=new URLSearchParams({page:j.page.toString(),limit:j.limit.toString(),sort:A,order:I,...S&&{search:S},...k}),a=await l.Ay.get("/api/admin/portfolio/projects?".concat(e));a.success?(t(a.data.projects),b(a.data.categories),N(a.data.pagination)):console.error("Error fetching projects:",a.message)}catch(e){console.error("Error fetching projects:",e)}finally{v(!1)}},z=()=>{D(null),O(!0)},M=async e=>{try{let t=await l.Ay.delete("/api/admin/portfolio/projects/".concat(e.id));t.success?(L(),T(null)):console.error("Error deleting project:",t.message)}catch(e){console.error("Error deleting project:",e)}},B=async e=>{try{let t=q?"/api/admin/portfolio/projects/".concat(q.id):"/api/admin/portfolio/projects",a=q?await l.Ay.put(t,e):await l.Ay.post(t,e);if(a.success)L(),O(!1),D(null);else throw Error(a.message||"Error saving project")}catch(e){throw console.error("Error saving project:",e),e}},J=[{key:"featured_image",label:"Imagen",width:"w-20",render:e=>(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gray-200 overflow-hidden",children:e?(0,r.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"w-6 h-6 text-gray-400"})})})},{key:"title",label:"T\xedtulo",sortable:!0,render:(e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e}),t.featured&&(0,r.jsx)(i.A,{className:"w-4 h-4 text-yellow-500"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["/",t.slug]})]})},{key:"category_info",label:"Categor\xeda",render:e=>e?(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:"".concat(e.color,"20"),color:e.color},children:e.name}):null},{key:"client",label:"Cliente",render:e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:e||"No especificado"})]})},{key:"location",label:"Ubicaci\xf3n",render:e=>{let t="No especificada";if("string"==typeof e)t=e;else if(e&&"object"==typeof e){let a=[];e.city&&a.push(e.city),e.region&&a.push(e.region),t=a.length>0?a.join(", "):"No especificada"}return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:t})]})}},{key:"status",label:"Estado",render:e=>(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("active"===e?"bg-green-100 text-green-800":"inactive"===e?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"active"===e?"Activo":"inactive"===e?"Inactivo":"Borrador"})},{key:"created_at",label:"Creado",sortable:!0,render:e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:new Date(e).toLocaleDateString()})]})}],V=[{label:"Ver",icon:p.A,onClick:e=>window.open("/portfolio/".concat(e.slug),"_blank"),variant:"secondary"},{label:"Editar",icon:m.A,onClick:e=>{D(e),O(!0)},variant:"primary"},{label:"Eliminar",icon:y.A,onClick:e=>T(e),variant:"danger"}],G=[{key:"category",label:"Categor\xeda",type:"select",options:a.map(e=>({value:e.id,label:e.name}))},{key:"status",label:"Estado",type:"select",options:[{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"draft",label:"Borrador"}]},{key:"featured",label:"Destacado",type:"select",options:[{value:"true",label:"S\xed"},{value:"false",label:"No"}]}],H=[{key:"title",label:"T\xedtulo",type:"text",required:!0,placeholder:"Nombre del proyecto...",group:"basic"},{key:"slug",label:"Slug",type:"text",placeholder:"Se genera autom\xe1ticamente si se deja vac\xedo",description:"URL amigable para el proyecto",group:"basic"},{key:"description",label:"Descripci\xf3n",type:"textarea",required:!0,placeholder:"Descripci\xf3n del proyecto...",group:"basic"},{key:"category",label:"Categor\xeda",type:"select",required:!0,options:a.map(e=>({value:e.id,label:e.name})),group:"basic"},{key:"status",label:"Estado",type:"select",required:!0,options:[{value:"draft",label:"Borrador"},{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"}],defaultValue:"draft",group:"basic"},{key:"featured",label:"Proyecto Destacado",type:"checkbox",description:"Los proyectos destacados aparecen en posiciones prominentes",group:"basic"},{key:"featured_image",label:"Imagen Principal",type:"url",placeholder:"https://ejemplo.com/imagen.jpg",group:"media"},{key:"gallery",label:"Galer\xeda de Im\xe1genes",type:"tags",placeholder:"URLs de im\xe1genes separadas por comas",description:"Lista de URLs de im\xe1genes para la galer\xeda del proyecto",group:"media"},{key:"client",label:"Cliente",type:"text",placeholder:"Nombre del cliente...",group:"details"},{key:"location",label:"Ubicaci\xf3n",type:"text",placeholder:"Ciudad, Regi\xf3n...",group:"details"},{key:"start_date",label:"Fecha de Inicio",type:"date",group:"details"},{key:"end_date",label:"Fecha de Finalizaci\xf3n",type:"date",group:"details"},{key:"investment",label:"Inversi\xf3n",type:"text",placeholder:"Ej: $2.5M USD",group:"details"},{key:"area",label:"\xc1rea",type:"text",placeholder:"Ej: 15,000 m\xb2",group:"details"},{key:"tags",label:"Etiquetas",type:"tags",placeholder:"Separar con comas...",description:"Etiquetas para categorizaci\xf3n y b\xfasqueda",group:"meta"},{key:"order",label:"Orden de Visualizaci\xf3n",type:"number",placeholder:"0",description:"Menor n\xfamero = mayor prioridad",group:"meta"}];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Proyectos del Portfolio"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Gestiona todos los proyectos que aparecen en el portfolio de la empresa."})]}),(0,r.jsx)(x.A,{data:e,columns:J,actions:V,filters:G,loading:w,pagination:j,onPageChange:e=>N(t=>({...t,page:e})),onLimitChange:e=>N(t=>({...t,limit:e,page:1})),onSortChange:(e,t)=>{P(e),_(t)},onFilterChange:E,onSearch:C,searchPlaceholder:"Buscar proyectos...",title:"Proyectos",subtitle:"".concat(j.total," proyectos en total"),primaryAction:{label:"Nuevo Proyecto",onClick:z,icon:h.A},emptyState:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(c.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay proyectos"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando tu primer proyecto del portfolio."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:z,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Nuevo Proyecto"]})})]})}),F&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:(0,r.jsx)(f.A,{fields:H,groups:[{name:"basic",label:"Informaci\xf3n B\xe1sica",description:"Datos fundamentales del proyecto"},{name:"media",label:"Medios y Recursos",description:"Im\xe1genes y recursos visuales"},{name:"details",label:"Detalles del Proyecto",description:"Informaci\xf3n espec\xedfica y fechas"},{name:"meta",label:"Metadatos",description:"Configuraci\xf3n adicional y SEO",collapsible:!0,defaultExpanded:!1}],initialValues:q||{},onSubmit:B,onCancel:()=>{O(!1),D(null)},title:q?"Editar Proyecto":"Nuevo Proyecto",subtitle:q?"Modifica los datos del proyecto":"Crea un nuevo proyecto para el portfolio",mode:q?"edit":"create"})})}),R&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)(g.A,{className:"w-6 h-6 text-red-600 mr-3"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmar Eliminaci\xf3n"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:['\xbfEst\xe1s seguro de que deseas eliminar el proyecto "',(0,r.jsx)("strong",{children:R.title}),'"? Esta acci\xf3n no se puede deshacer.']}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{onClick:()=>T(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancelar"}),(0,r.jsx)("button",{onClick:()=>M(R),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md",children:"Eliminar"})]})]})})})]})}},83662:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},90697:(e,t,a)=>{"use strict";async function r(e,t){let a=e.headers.get("content-type");if(!a||!a.includes("application/json")){if(!await e.text())return null;throw Error("Expected JSON response, got: ".concat(a))}try{let t=await e.text();if(!t.trim())return null;return JSON.parse(t)}catch(e){throw Error("Invalid JSON response from ".concat(t,": ").concat(e instanceof Error?e.message:"Unknown JSON parse error"))}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(){let e=localStorage.getItem("auth-token"),t={"Content-Type":"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t}();return fetch(e,{...t,headers:{...a,...t.headers||{}}})}a.d(t,{Ay:()=>s});let s={get:async function(e){try{let t=await o(e);if(!t.ok){let e=await t.text();throw Error("API Error (".concat(t.status,"): ").concat(e))}return await r(t,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error("Network error: Failed to fetch from ".concat(e,". Check your internet connection."));throw t}},post:async function(e,t){try{let a=await o(e,{method:"POST",body:JSON.stringify(t)});if(!a.ok){let e=await a.text();throw Error("API Error (".concat(a.status,"): ").concat(e))}return await r(a,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error("Network error: Failed to post to ".concat(e,". Check your internet connection."));throw t}},put:async function(e,t){try{let a=await o(e,{method:"PUT",body:JSON.stringify(t)});if(!a.ok){let e=await a.text();throw Error("API Error (".concat(a.status,"): ").concat(e))}return await r(a,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error("Network error: Failed to update ".concat(e,". Check your internet connection."));throw t}},delete:async function(e){try{let t=await o(e,{method:"DELETE"});if(!t.ok){let e=await t.text();throw Error("API Error (".concat(t.status,"): ").concat(e))}if(204===t.status)return null;return await r(t,e)}catch(t){if(t instanceof TypeError&&t.message.includes("fetch"))throw Error("Network error: Failed to delete from ".concat(e,". Check your internet connection."));throw t}},fetch:o}},91721:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},98557:(e,t,a)=>{Promise.resolve().then(a.bind(a,65360))}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,2536,9550,7328,8965,4198,9658,1781,7615,2192,8441,1684,7358],()=>t(98557)),_N_E=e.O()}]);