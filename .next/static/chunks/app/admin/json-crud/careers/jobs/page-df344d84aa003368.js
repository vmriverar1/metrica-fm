(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1485],{30588:(e,a,t)=>{Promise.resolve().then(t.bind(t,86587))},35695:(e,a,t)=>{"use strict";var r=t(18999);t.o(r,"notFound")&&t.d(a,{notFound:function(){return r.notFound}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},83662:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(40157).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},86587:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>v});var r=t(95155),l=t(12115),o=t(90697),i=t(35695),n=t(30462),s=t(89829),c=t(83662),d=t(50286),u=t(51920),m=t(17607),p=t(18763),y=t(77223),b=t(18046),g=t(57082),h=t(31949),x=t(75676),f=t(62543);function v(){var e,a,t,v,_,j,k,N,w,E,S,C,P,A,T;let[D,q]=(0,l.useState)([]),[O,R]=(0,l.useState)([]),[I,L]=(0,l.useState)(!0),[F,M]=(0,l.useState)({page:1,limit:20,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),[U,J]=(0,l.useState)({}),[V,z]=(0,l.useState)(""),[B,H]=(0,l.useState)("posted_date"),[G,K]=(0,l.useState)("desc"),[Q,W]=(0,l.useState)(!1),[X,Y]=(0,l.useState)(null),[Z,$]=(0,l.useState)(null),ee=(0,i.useSearchParams)();(0,l.useEffect)(()=>{"create"===ee.get("action")&&W(!0)},[ee]),(0,l.useEffect)(()=>{ea()},[F.page,F.limit,U,V,B,G]);let ea=async()=>{L(!0);try{let e=new URLSearchParams({page:F.page.toString(),limit:F.limit.toString(),sort:B,order:G,...V&&{search:V},...U}),a=await o.Ay.get("/api/admin/careers/jobs?".concat(e));a.success?(q(a.data.jobs),R(a.data.departments),M(a.data.pagination)):console.error("Error fetching jobs:",a.message)}catch(e){console.error("Error fetching jobs:",e)}finally{L(!1)}},et=()=>{Y(null),W(!0)},er=async e=>{try{let a=await o.Ay.delete("/api/admin/careers/jobs/".concat(e.id));a.success?(ea(),$(null)):console.error("Error deleting job:",a.message)}catch(e){console.error("Error deleting job:",e)}},el=async e=>{try{let a={...e,location:{city:e.location_city||"",region:e.location_region||"",country:e.location_country||"Per\xfa",remote:e.location_remote||!1,hybrid:e.location_hybrid||!1,address:e.location_address||""},salary:e.salary_min||e.salary_max?{min:e.salary_min||0,max:e.salary_max||0,currency:e.salary_currency||"PEN",period:e.salary_period||"monthly",negotiable:e.salary_negotiable||!1}:null,hiring_manager:e.hiring_manager_name?{name:e.hiring_manager_name,role:e.hiring_manager_role||"",email:e.hiring_manager_email||""}:null};delete a.location_city,delete a.location_region,delete a.location_country,delete a.location_remote,delete a.location_hybrid,delete a.location_address,delete a.salary_min,delete a.salary_max,delete a.salary_currency,delete a.salary_period,delete a.salary_negotiable,delete a.hiring_manager_name,delete a.hiring_manager_role,delete a.hiring_manager_email;let t=X?"/api/admin/careers/jobs/".concat(X.id):"/api/admin/careers/jobs",r=X?"PUT":"POST",l=await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),o=await l.json();if(o.success)ea(),W(!1),Y(null);else throw Error(o.message||"Error saving job")}catch(e){throw console.error("Error saving job:",e),e}},eo=[{key:"title",label:"T\xedtulo",sortable:!0,render:(e,a)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e}),a.featured&&(0,r.jsx)(n.A,{className:"w-4 h-4 text-yellow-500"}),a.urgent&&(0,r.jsx)(s.A,{className:"w-4 h-4 text-red-500"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["/",a.slug]})]})},{key:"department_info",label:"Departamento",render:e=>e?(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:"".concat(e.color,"20"),color:e.color},children:e.name}):null},{key:"level",label:"Nivel",render:e=>(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("director"===e?"bg-purple-100 text-purple-800":"senior"===e?"bg-blue-100 text-blue-800":"mid"===e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"director"===e?"Director":"senior"===e?"Senior":"mid"===e?"Intermedio":"Junior"})},{key:"type",label:"Tipo",render:e=>(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"full-time"===e?"Tiempo completo":"part-time"===e?"Medio tiempo":"contract"===e?"Contrato":"Pr\xe1cticas"})},{key:"location",label:"Ubicaci\xf3n",render:e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-sm",children:[e.city,", ",e.region]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.remote&&"Remoto"," ",e.hybrid&&"H\xedbrido"]})]})]})},{key:"applicant_count",label:"Aplicaciones",render:e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:e||0})]})},{key:"status",label:"Estado",render:e=>(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("active"===e?"bg-green-100 text-green-800":"paused"===e?"bg-yellow-100 text-yellow-800":"closed"===e?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"active"===e?"Activo":"paused"===e?"Pausado":"closed"===e?"Cerrado":"Borrador"})},{key:"deadline",label:"Deadline",render:(e,a)=>{if(!e)return(0,r.jsx)("span",{className:"text-gray-400",children:"Sin l\xedmite"});let t=void 0!==a.days_until_deadline&&a.days_until_deadline<0,l=void 0!==a.days_until_deadline&&a.days_until_deadline<=7;return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm ".concat(t?"text-red-600":l?"text-yellow-600":""),children:new Date(e).toLocaleDateString()}),void 0!==a.days_until_deadline&&(0,r.jsx)("div",{className:"text-xs text-gray-500",children:a.days_until_deadline>0?"".concat(a.days_until_deadline," d\xedas"):"Vencido"})]})]})}}],ei=[{label:"Ver",icon:m.A,onClick:e=>window.open("/careers/job/".concat(e.slug),"_blank"),variant:"secondary"},{label:"Editar",icon:p.A,onClick:e=>{Y(e),W(!0)},variant:"primary"},{label:"Eliminar",icon:y.A,onClick:e=>$(e),variant:"danger"}],en=[{key:"category",label:"Departamento",type:"select",options:O.map(e=>({value:e.id,label:e.name}))},{key:"level",label:"Nivel",type:"select",options:[{value:"junior",label:"Junior"},{value:"mid",label:"Intermedio"},{value:"senior",label:"Senior"},{value:"director",label:"Director"}]},{key:"type",label:"Tipo",type:"select",options:[{value:"full-time",label:"Tiempo completo"},{value:"part-time",label:"Medio tiempo"},{value:"contract",label:"Contrato"},{value:"internship",label:"Pr\xe1cticas"}]},{key:"status",label:"Estado",type:"select",options:[{value:"active",label:"Activo"},{value:"paused",label:"Pausado"},{value:"closed",label:"Cerrado"},{value:"draft",label:"Borrador"}]},{key:"featured",label:"Destacado",type:"select",options:[{value:"true",label:"S\xed"},{value:"false",label:"No"}]},{key:"urgent",label:"Urgente",type:"select",options:[{value:"true",label:"S\xed"},{value:"false",label:"No"}]},{key:"remote",label:"Remoto",type:"select",options:[{value:"true",label:"S\xed"},{value:"false",label:"No"}]}],es=[{key:"title",label:"T\xedtulo del Trabajo",type:"text",required:!0,placeholder:"Ej: Ingeniero Civil Senior",group:"basic"},{key:"slug",label:"Slug",type:"text",placeholder:"Se genera autom\xe1ticamente si se deja vac\xedo",description:"URL amigable para la oferta laboral",group:"basic"},{key:"category",label:"Departamento",type:"select",required:!0,options:O.map(e=>({value:e.id,label:e.name})),group:"basic"},{key:"department",label:"Nombre del Departamento",type:"text",required:!0,placeholder:"Debe coincidir con el departamento seleccionado",group:"basic"},{key:"level",label:"Nivel",type:"select",required:!0,options:[{value:"junior",label:"Junior"},{value:"mid",label:"Intermedio"},{value:"senior",label:"Senior"},{value:"director",label:"Director"}],defaultValue:"mid",group:"basic"},{key:"type",label:"Tipo de Trabajo",type:"select",required:!0,options:[{value:"full-time",label:"Tiempo completo"},{value:"part-time",label:"Medio tiempo"},{value:"contract",label:"Contrato"},{value:"internship",label:"Pr\xe1cticas"}],defaultValue:"full-time",group:"basic"},{key:"status",label:"Estado",type:"select",required:!0,options:[{value:"draft",label:"Borrador"},{value:"active",label:"Activo"},{value:"paused",label:"Pausado"},{value:"closed",label:"Cerrado"}],defaultValue:"draft",group:"basic"},{key:"experience_years",label:"A\xf1os de Experiencia",type:"number",placeholder:"0",validation:{min:0,max:30},group:"basic"},{key:"featured",label:"Trabajo Destacado",type:"checkbox",description:"Los trabajos destacados aparecen en posiciones prominentes",group:"basic"},{key:"urgent",label:"Trabajo Urgente",type:"checkbox",description:"Marcado como urgente con indicador visual",group:"basic"},{key:"short_description",label:"Descripci\xf3n Corta",type:"textarea",required:!0,placeholder:"Resumen breve del trabajo...",description:"Aparece en listados y b\xfasquedas",group:"content"},{key:"full_description",label:"Descripci\xf3n Completa",type:"markdown",placeholder:"Descripci\xf3n detallada del trabajo...",description:"Descripci\xf3n completa con formato markdown",group:"content"},{key:"key_responsibilities",label:"Responsabilidades Clave",type:"tags",placeholder:"Separar responsabilidades con comas...",description:"Lista de responsabilidades principales",group:"content"},{key:"requirements",label:"Requisitos Esenciales",type:"tags",placeholder:"Separar requisitos con comas...",description:"Requisitos indispensables para el cargo",group:"requirements"},{key:"location_city",label:"Ciudad",type:"text",required:!0,placeholder:"Lima",group:"location"},{key:"location_region",label:"Regi\xf3n",type:"text",placeholder:"Lima",group:"location"},{key:"location_country",label:"Pa\xeds",type:"text",defaultValue:"Per\xfa",group:"location"},{key:"location_address",label:"Direcci\xf3n",type:"text",placeholder:"Direcci\xf3n espec\xedfica...",group:"location"},{key:"location_remote",label:"Trabajo Remoto",type:"checkbox",group:"location"},{key:"location_hybrid",label:"Trabajo H\xedbrido",type:"checkbox",group:"location"},{key:"salary_min",label:"Salario M\xednimo",type:"number",placeholder:"0",group:"compensation"},{key:"salary_max",label:"Salario M\xe1ximo",type:"number",placeholder:"0",group:"compensation"},{key:"salary_currency",label:"Moneda",type:"select",options:[{value:"PEN",label:"Soles (PEN)"},{value:"USD",label:"D\xf3lares (USD)"}],defaultValue:"PEN",group:"compensation"},{key:"salary_period",label:"Per\xedodo",type:"select",options:[{value:"monthly",label:"Mensual"},{value:"annual",label:"Anual"}],defaultValue:"monthly",group:"compensation"},{key:"salary_negotiable",label:"Salario Negociable",type:"checkbox",group:"compensation"},{key:"posted_date",label:"Fecha de Publicaci\xf3n",type:"date",defaultValue:new Date().toISOString().split("T")[0],group:"dates"},{key:"deadline",label:"Fecha L\xedmite",type:"date",group:"dates"},{key:"hiring_manager_name",label:"Nombre del Gerente de Contrataci\xf3n",type:"text",placeholder:"Nombre completo...",group:"contact"},{key:"hiring_manager_role",label:"Cargo",type:"text",placeholder:"Gerente de RRHH",group:"contact"},{key:"hiring_manager_email",label:"Email",type:"email",placeholder:"email@metrica-dip.com",group:"contact"},{key:"tags",label:"Etiquetas",type:"tags",placeholder:"Separar con comas...",description:"Etiquetas para categorizaci\xf3n y b\xfasqueda",group:"meta"}];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Gesti\xf3n de Trabajos"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Administra todas las ofertas laborales y oportunidades de carrera."})]}),(0,r.jsx)(x.A,{data:D,columns:eo,actions:ei,filters:en,loading:I,pagination:F,onPageChange:e=>M(a=>({...a,page:e})),onLimitChange:e=>M(a=>({...a,limit:e,page:1})),onSortChange:(e,a)=>{H(e),K(a)},onFilterChange:J,onSearch:z,searchPlaceholder:"Buscar trabajos...",title:"Ofertas Laborales",subtitle:"".concat(F.total," trabajos en total"),primaryAction:{label:"Nueva Oferta",onClick:et,icon:b.A},emptyState:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(g.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay ofertas laborales"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando tu primera oferta laboral."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:et,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Nueva Oferta"]})})]})}),Q&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-5xl shadow-lg rounded-md bg-white",children:(0,r.jsx)(f.A,{fields:es,groups:[{name:"basic",label:"Informaci\xf3n B\xe1sica",description:"Datos fundamentales del trabajo"},{name:"content",label:"Contenido",description:"Descripci\xf3n y responsabilidades"},{name:"requirements",label:"Requisitos",description:"Requisitos y calificaciones"},{name:"location",label:"Ubicaci\xf3n",description:"Informaci\xf3n de ubicaci\xf3n y modalidad"},{name:"compensation",label:"Compensaci\xf3n",description:"Informaci\xf3n salarial",collapsible:!0},{name:"dates",label:"Fechas",description:"Fechas de publicaci\xf3n y cierre"},{name:"contact",label:"Contacto",description:"Informaci\xf3n del gerente de contrataci\xf3n",collapsible:!0},{name:"meta",label:"Metadatos",description:"Configuraci\xf3n adicional y SEO",collapsible:!0,defaultExpanded:!1}],initialValues:X?{...X,location_city:(null==(e=X.location)?void 0:e.city)||"",location_region:(null==(a=X.location)?void 0:a.region)||"",location_country:(null==(t=X.location)?void 0:t.country)||"Per\xfa",location_address:(null==(v=X.location)?void 0:v.address)||"",location_remote:(null==(_=X.location)?void 0:_.remote)||!1,location_hybrid:(null==(j=X.location)?void 0:j.hybrid)||!1,salary_min:(null==(k=X.salary)?void 0:k.min)||0,salary_max:(null==(N=X.salary)?void 0:N.max)||0,salary_currency:(null==(w=X.salary)?void 0:w.currency)||"PEN",salary_period:(null==(E=X.salary)?void 0:E.period)||"monthly",salary_negotiable:(null==(S=X.salary)?void 0:S.negotiable)||!1,hiring_manager_name:(null==(C=X.hiring_manager)?void 0:C.name)||"",hiring_manager_role:(null==(P=X.hiring_manager)?void 0:P.role)||"",hiring_manager_email:(null==(A=X.hiring_manager)?void 0:A.email)||"",requirements:(null==(T=X.requirements)?void 0:T.essential)||[]}:{},onSubmit:el,onCancel:()=>{W(!1),Y(null)},title:X?"Editar Oferta Laboral":"Nueva Oferta Laboral",subtitle:X?"Modifica los datos de la oferta laboral":"Crea una nueva oferta laboral",mode:X?"edit":"create"})})}),Z&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)(h.A,{className:"w-6 h-6 text-red-600 mr-3"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmar Eliminaci\xf3n"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:['\xbfEst\xe1s seguro de que deseas eliminar la oferta laboral "',(0,r.jsx)("strong",{children:Z.title}),'"? Esta acci\xf3n no se puede deshacer.']}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{onClick:()=>$(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancelar"}),(0,r.jsx)("button",{onClick:()=>er(Z),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md",children:"Eliminar"})]})]})})})]})}},90697:(e,a,t)=>{"use strict";async function r(e,a){let t=e.headers.get("content-type");if(!t||!t.includes("application/json")){if(!await e.text())return null;throw Error("Expected JSON response, got: ".concat(t))}try{let a=await e.text();if(!a.trim())return null;return JSON.parse(a)}catch(e){throw Error("Invalid JSON response from ".concat(a,": ").concat(e instanceof Error?e.message:"Unknown JSON parse error"))}}async function l(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=function(){let e=localStorage.getItem("auth-token"),a={"Content-Type":"application/json"};return e&&(a.Authorization="Bearer ".concat(e)),a}();return fetch(e,{...a,headers:{...t,...a.headers||{}}})}t.d(a,{Ay:()=>o});let o={get:async function(e){try{let a=await l(e);if(!a.ok){let e=await a.text();throw Error("API Error (".concat(a.status,"): ").concat(e))}return await r(a,e)}catch(a){if(a instanceof TypeError&&a.message.includes("fetch"))throw Error("Network error: Failed to fetch from ".concat(e,". Check your internet connection."));throw a}},post:async function(e,a){try{let t=await l(e,{method:"POST",body:JSON.stringify(a)});if(!t.ok){let e=await t.text();throw Error("API Error (".concat(t.status,"): ").concat(e))}return await r(t,e)}catch(a){if(a instanceof TypeError&&a.message.includes("fetch"))throw Error("Network error: Failed to post to ".concat(e,". Check your internet connection."));throw a}},put:async function(e,a){try{let t=await l(e,{method:"PUT",body:JSON.stringify(a)});if(!t.ok){let e=await t.text();throw Error("API Error (".concat(t.status,"): ").concat(e))}return await r(t,e)}catch(a){if(a instanceof TypeError&&a.message.includes("fetch"))throw Error("Network error: Failed to update ".concat(e,". Check your internet connection."));throw a}},delete:async function(e){try{let a=await l(e,{method:"DELETE"});if(!a.ok){let e=await a.text();throw Error("API Error (".concat(a.status,"): ").concat(e))}if(204===a.status)return null;return await r(a,e)}catch(a){if(a instanceof TypeError&&a.message.includes("fetch"))throw Error("Network error: Failed to delete from ".concat(e,". Check your internet connection."));throw a}},fetch:l}}},e=>{var a=a=>e(e.s=a);e.O(0,[4277,2536,9550,7328,8965,4198,9658,1781,7615,2192,8441,1684,7358],()=>a(30588)),_N_E=e.O()}]);