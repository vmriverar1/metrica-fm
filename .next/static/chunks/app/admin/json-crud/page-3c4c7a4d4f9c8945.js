(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8252],{12031:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(95155),r=t(48152),n=t(12115),i=t(66695),l=t(26126),c=t(30285),d=t(8376),o=t(31949),m=t(37648),u=t(80659),x=t(77070),h=t(40207),g=t(67554),f=t(87057),p=t(48639),j=t(45727),v=t(26854);let y=e=>{let{className:s}=e,[t,r]=(0,n.useState)([]),[y,N]=(0,n.useState)([]),[w,b]=(0,n.useState)(!0),[A,k]=(0,n.useState)(new Date);(0,n.useEffect)(()=>{E();let e=setInterval(E,6e4);return()=>clearInterval(e)},[]);let E=async()=>{try{b(!0);let e=[{name:"CPU Usage",value:100*Math.random(),unit:"%",status:"healthy",threshold:{warning:70,critical:90},trend:"stable",lastUpdated:new Date},{name:"Memory Usage",value:100*Math.random(),unit:"%",status:"healthy",threshold:{warning:80,critical:95},trend:"up",lastUpdated:new Date},{name:"Disk Usage",value:100*Math.random(),unit:"%",status:"warning",threshold:{warning:85,critical:95},trend:"up",lastUpdated:new Date},{name:"Active Users",value:Math.floor(50*Math.random())+10,unit:"users",status:"healthy",threshold:{warning:100,critical:150},trend:"stable",lastUpdated:new Date}];e.forEach(e=>{e.value>=e.threshold.critical?e.status="critical":e.value>=e.threshold.warning?e.status="warning":e.status="healthy"}),r(e);let s=await Promise.all([{name:"Portfolio API",url:"/api/admin/portfolio/projects"},{name:"Careers API",url:"/api/admin/careers/jobs"},{name:"Newsletter API",url:"/api/admin/newsletter/articles"},{name:"Search API",url:"/api/admin/search"}].map(async e=>{let s=Date.now();try{let t=localStorage.getItem("auth-token")||"mock-token",a=await fetch(e.url,{method:"HEAD",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),r=Date.now()-s;return{...e,status:a.ok?r>2e3?"slow":"online":"offline",responseTime:r,lastCheck:new Date}}catch(s){return{...e,status:"offline",responseTime:-1,lastCheck:new Date}}}));N(s),k(new Date)}catch(e){console.error("Error fetching system health:",e)}finally{b(!1)}},S=e=>{switch(e){case"healthy":case"online":return(0,a.jsx)(d.A,{className:"h-4 w-4 text-green-500"});case"warning":case"slow":return(0,a.jsx)(o.A,{className:"h-4 w-4 text-yellow-500"});case"critical":case"offline":return(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"});default:return(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-500"})}},T=e=>{switch(e){case"healthy":case"online":return"bg-green-100 text-green-800";case"warning":case"slow":return"bg-yellow-100 text-yellow-800";case"critical":case"offline":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},O=e=>{switch(e){case"up":return(0,a.jsx)(u.A,{className:"h-3 w-3 text-red-500"});case"down":return(0,a.jsx)(x.A,{className:"h-3 w-3 text-green-500"});default:return null}},R=()=>{let e=t.filter(e=>"critical"===e.status).length,s=t.filter(e=>"warning"===e.status).length,a=y.filter(e=>"offline"===e.status).length;return e>0||a>0?"critical":s>0?"warning":"healthy"};return(0,a.jsx)("div",{className:s,children:(0,a.jsxs)(i.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Estado del Sistema"}),(0,a.jsx)(l.E,{className:T(R()),children:"healthy"===R()?"Saludable":"warning"===R()?"Advertencia":"Cr\xedtico"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["\xdaltima actualizaci\xf3n: ",A.toLocaleTimeString()]}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:E,disabled:w,children:(0,a.jsx)(g.A,{className:"h-4 w-4 ".concat(w?"animate-spin":"")})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),"M\xe9tricas del Sistema"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[O(e.trend),S(e.status)]})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold mb-1",children:[e.value.toFixed(1),e.unit]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat("critical"===e.status?"bg-red-500":"warning"===e.status?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(e.value,100),"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Advertencia: ",e.threshold.warning,e.unit]})]},e.name))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),"Estado de APIs"]}),(0,a.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[S(e.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.url})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(l.E,{className:T(e.status),children:"online"===e.status?"En l\xednea":"slow"===e.status?"Lento":"Fuera de l\xednea"}),e.responseTime>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.responseTime,"ms"]})]})]},e.name))})]}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Sistema monitoreado continuamente"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Logs del sistema"]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"M\xe9tricas detalladas"]})]})]})})]})]})})};var N=t(18046),w=t(15222),b=t(15300),A=t(83173),k=t(57082),E=t(9658),S=t(75074),T=t(58127),O=t(6874),R=t.n(O);function C(){let{user:e}=(0,r.As)(),[s,t]=(0,n.useState)(null),[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{m()},[]);let m=async()=>{try{t({pages:5,portfolio:{projects:12,categories:4},careers:{jobs:8,departments:5,active_jobs:6},newsletter:{articles:26,authors:5,categories:4,published_articles:20}}),l([{id:"1",type:"create",resource:"portfolio-project",title:"Nuevo proyecto: Torre Empresarial Norte",user:"Carlos Mendoza",timestamp:"2025-01-20T10:30:00Z",status:"success"},{id:"2",type:"update",resource:"career-job",title:"Actualizaci\xf3n: Ingeniero Civil Senior",user:"Ana Torres",timestamp:"2025-01-20T09:15:00Z",status:"success"},{id:"3",type:"create",resource:"newsletter-article",title:"Nuevo art\xedculo: Innovaciones en BIM 2025",user:"Mar\xeda Fern\xe1ndez",timestamp:"2025-01-19T16:45:00Z",status:"success"},{id:"4",type:"update",resource:"portfolio-category",title:"Actualizaci\xf3n: Categor\xeda Comercial",user:"Luis Hern\xe1ndez",timestamp:"2025-01-19T14:20:00Z",status:"success"},{id:"5",type:"delete",resource:"career-job",title:"Eliminaci\xf3n: Posici\xf3n cerrada - Arquitecto Junior",user:"Ana Torres",timestamp:"2025-01-19T11:10:00Z",status:"warning"}]),d(!1)}catch(e){console.error("Error fetching dashboard data:",e),d(!1)}},u=e=>{switch(e){case"create":return(0,a.jsx)(N.A,{className:"w-4 h-4 text-green-600"});case"update":return(0,a.jsx)(w.A,{className:"w-4 h-4 text-blue-600"});case"delete":return(0,a.jsx)(o.A,{className:"w-4 h-4 text-red-600"});default:return(0,a.jsx)(h.A,{className:"w-4 h-4 text-gray-600"})}},x=e=>{switch(e){case"success":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/36e5),a=Math.floor(t/24);return a>0?"hace ".concat(a," d\xeda").concat(a>1?"s":""):t>0?"hace ".concat(t," hora").concat(t>1?"s":""):"hace menos de 1 hora"};return c?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard de Administraci\xf3n"}),(0,a.jsxs)("p",{className:"mt-2 text-gray-600",children:["Bienvenido, ",null==e?void 0:e.firstName,". Administra todo el contenido JSON desde aqu\xed."]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(b.A,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"P\xe1ginas Est\xe1ticas"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:(null==s?void 0:s.pages)||0})]})})]})}),(0,a.jsx)("div",{className:"bg-gray-50 px-5 py-3",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(R(),{href:"/admin/json-crud/pages",className:"font-medium text-cyan-700 hover:text-cyan-900",children:"Ver p\xe1ginas"})})})]}),(0,a.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(A.A,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Portfolio"}),(0,a.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[(null==s?void 0:s.portfolio.projects)||0," proyectos"]}),(0,a.jsxs)("dd",{className:"text-sm text-gray-500",children:[(null==s?void 0:s.portfolio.categories)||0," categor\xedas"]})]})})]})}),(0,a.jsx)("div",{className:"bg-gray-50 px-5 py-3",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(R(),{href:"/admin/json-crud/portfolio/projects",className:"font-medium text-cyan-700 hover:text-cyan-900",children:"Gestionar portfolio"})})})]}),(0,a.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(k.A,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Carreras"}),(0,a.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[(null==s?void 0:s.careers.active_jobs)||0," activos"]}),(0,a.jsxs)("dd",{className:"text-sm text-gray-500",children:[(null==s?void 0:s.careers.jobs)||0," total trabajos"]})]})})]})}),(0,a.jsx)("div",{className:"bg-gray-50 px-5 py-3",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(R(),{href:"/admin/json-crud/careers/jobs",className:"font-medium text-cyan-700 hover:text-cyan-900",children:"Gestionar trabajos"})})})]}),(0,a.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(E.A,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Newsletter"}),(0,a.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[(null==s?void 0:s.newsletter.published_articles)||0," publicados"]}),(0,a.jsxs)("dd",{className:"text-sm text-gray-500",children:[(null==s?void 0:s.newsletter.articles)||0," total art\xedculos"]})]})})]})}),(0,a.jsx)("div",{className:"bg-gray-50 px-5 py-3",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(R(),{href:"/admin/json-crud/newsletter/articles",className:"font-medium text-cyan-700 hover:text-cyan-900",children:"Gestionar art\xedculos"})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Acciones R\xe1pidas"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(R(),{href:"/admin/json-crud/portfolio/projects?action=create",className:"flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-blue-600 mr-3"}),(0,a.jsx)("span",{className:"text-blue-700 font-medium",children:"Nuevo Proyecto"})]}),(0,a.jsxs)(R(),{href:"/admin/json-crud/careers/jobs?action=create",className:"flex items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-green-600 mr-3"}),(0,a.jsx)("span",{className:"text-green-700 font-medium",children:"Nueva Oferta Laboral"})]}),(0,a.jsxs)(R(),{href:"/admin/json-crud/newsletter/articles?action=create",className:"flex items-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-purple-600 mr-3"}),(0,a.jsx)("span",{className:"text-purple-700 font-medium",children:"Nuevo Art\xedculo"})]}),(0,a.jsxs)(R(),{href:"/admin/json-crud/search",className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(S.A,{className:"w-5 h-5 text-gray-600 mr-3"}),(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"B\xfasqueda Global"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado del Sistema"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"APIs JSON CRUD"}),(0,a.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,a.jsx)(T.A,{className:"w-4 h-4 mr-1"}),"Operativo"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Sistema de Archivos"}),(0,a.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,a.jsx)(T.A,{className:"w-4 h-4 mr-1"}),"Operativo"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Respaldos"}),(0,a.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,a.jsx)(T.A,{className:"w-4 h-4 mr-1"}),"Actualizados"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"\xdaltima sincronizaci\xf3n"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"hace 2 min"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estad\xedsticas R\xe1pidas"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Contenido total"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:((null==s?void 0:s.pages)||0)+((null==s?void 0:s.portfolio.projects)||0)+((null==s?void 0:s.careers.jobs)||0)+((null==s?void 0:s.newsletter.articles)||0)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"\xdaltima actividad"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"hace 30 min"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Usuario activo"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:null==e?void 0:e.firstName})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Rol"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:null==e?void 0:e.role.name})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Actividad Reciente"})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:i.map(e=>(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:u(e.type)}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["por ",e.user," • ",g(e.timestamp)]})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(x(e.status)),children:e.status})})]})},e.id))}),(0,a.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(R(),{href:"/admin/json-crud/activity",className:"font-medium text-cyan-700 hover:text-cyan-900",children:"Ver toda la actividad →"})})})]}),(0,a.jsx)(y,{})]})}},26126:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(95155);t(12115);var r=t(74466),n=t(59434);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...r})}},30285:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var a=t(95155),r=t(12115),n=t(99708),i=t(74466),l=t(59434);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:d=!1,...o}=e,m=d?n.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(c({variant:r,size:i,className:t})),ref:s,...o})});d.displayName="Button"},38389:(e,s,t)=>{Promise.resolve().then(t.bind(t,12031))},48152:(e,s,t)=>{"use strict";t.d(s,{OJ:()=>m,As:()=>u,ru:()=>x});var a=t(95155),r=t(12115);let n={id:"1",email:"admin@metrica.pe",firstName:"Admin",lastName:"Usuario",avatar:"",role:{id:"admin",name:"Administrador",description:"Acceso completo al sistema",level:1,permissions:[{id:"admin-all",name:"Administrar todo",resource:"*",action:"*"}]},department:"Tecnolog\xeda",permissions:[],isActive:!0,lastLogin:new Date,createdAt:new Date,updatedAt:new Date,preferences:{theme:"light",language:"es",timezone:"America/Lima",notifications:{email:!0,browser:!0,digest:"daily"},dashboard:{layout:"default",widgets:[]}},twoFactorEnabled:!1},i={id:"session-1",userId:"1",token:"mock-token",refreshToken:"mock-refresh-token",expiresAt:new Date(Date.now()+864e5),createdAt:new Date,lastActivity:new Date,userAgent:"Mock Browser",ipAddress:"127.0.0.1"};class l{static async login(e){if(await new Promise(e=>setTimeout(e,1e3)),"admin@metrica.pe"===e.email&&"admin123"===e.password)return localStorage.setItem("auth-token","mock-token"),localStorage.setItem("auth-user",JSON.stringify(n)),{user:n,session:i};throw Error("Credenciales inv\xe1lidas")}static async logout(){localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),await new Promise(e=>setTimeout(e,500))}static async refreshToken(e){return await new Promise(e=>setTimeout(e,500)),{...i,token:"new-mock-token"}}static async getCurrentUser(){let e=localStorage.getItem("auth-token"),s=localStorage.getItem("auth-user");if("mock-token"===e&&s)try{return JSON.parse(s)}catch(e){}return null}static getCurrentUserSync(){var e,s;let t=null==(e=localStorage)?void 0:e.getItem("auth-token"),a=null==(s=localStorage)?void 0:s.getItem("auth-user");if("mock-token"===t&&a)try{return JSON.parse(a)}catch(e){}return null}static async updateUserPreferences(e,s){return{...n,preferences:{...n.preferences,...s}}}static hasPermission(e,s,t){return 1===e.role.level}static canAccess(e,s,t){return 1===e.role.level}static async initializeFromStorage(){var e;return"mock-token"===(null==(e=localStorage)?void 0:e.getItem("auth-token"))}static getCurrentSession(){var e;return"mock-token"===(null==(e=localStorage)?void 0:e.getItem("auth-token"))?i:null}static getCurrentSessionSync(){var e;return"mock-token"===(null==(e=localStorage)?void 0:e.getItem("auth-token"))?i:null}static async devAutoLogin(){var e;return"mock-token"===(null==(e=localStorage)?void 0:e.getItem("auth-token"))}}let c={user:null,session:null,isAuthenticated:!1,isLoading:!0,error:null,requiresTwoFactor:!1};function d(e,s){switch(s.type){case"LOGIN_START":return{...e,isLoading:!0,error:null,requiresTwoFactor:!1};case"LOGIN_SUCCESS":return{...e,user:s.payload.user,session:s.payload.session,isAuthenticated:!0,isLoading:!1,error:null,requiresTwoFactor:!1};case"LOGIN_ERROR":return{...e,user:null,session:null,isAuthenticated:!1,isLoading:!1,error:s.payload,requiresTwoFactor:!1};case"LOGIN_REQUIRES_2FA":return{...e,isLoading:!1,error:null,requiresTwoFactor:!0};case"LOGOUT":return{...e,user:null,session:null,isAuthenticated:!1,isLoading:!1,error:null,requiresTwoFactor:!1};case"REFRESH_TOKEN":return{...e,session:s.payload,error:null};case"CLEAR_ERROR":return{...e,error:null,requiresTwoFactor:!1};case"SET_LOADING":return{...e,isLoading:s.payload};case"UPDATE_USER":return{...e,user:s.payload};default:return e}}let o=(0,r.createContext)(null);function m(e){let{children:s}=e,[t,n]=(0,r.useReducer)(d,c);(0,r.useEffect)(()=>{(async()=>{n({type:"SET_LOADING",payload:!0});try{if(await l.initializeFromStorage()){let e=await l.getCurrentUser(),s=l.getCurrentSession();e&&s?n({type:"LOGIN_SUCCESS",payload:{user:e,session:s}}):n({type:"LOGOUT"})}else n({type:"LOGOUT"})}catch(e){console.error("Error initializing auth:",e),n({type:"LOGOUT"})}finally{n({type:"SET_LOADING",payload:!1})}})()},[]),(0,r.useEffect)(()=>{if(!t.isAuthenticated||!t.session)return;let e=setInterval(async()=>{try{var e;let s=await l.refreshToken((null==(e=t.session)?void 0:e.refreshToken)||"");s?n({type:"REFRESH_TOKEN",payload:s}):n({type:"LOGOUT"})}catch(e){console.error("Error refreshing token:",e),n({type:"LOGOUT"})}},3e5);return()=>clearInterval(e)},[t.isAuthenticated,t.session]);let i={...t,actions:{async login(e){n({type:"LOGIN_START"});try{let s=await l.login(e);if(s&&s.user&&s.session)return n({type:"LOGIN_SUCCESS",payload:{user:s.user,session:s.session}}),!0;return n({type:"LOGIN_ERROR",payload:"Error de autenticaci\xf3n"}),!1}catch(e){return n({type:"LOGIN_ERROR",payload:e instanceof Error?e.message:"Error interno"}),!1}},async logout(){await l.logout(),n({type:"LOGOUT"})},async refreshToken(){try{var e;let s=await l.refreshToken((null==(e=t.session)?void 0:e.refreshToken)||"");s?n({type:"REFRESH_TOKEN",payload:s}):n({type:"LOGOUT"})}catch(e){console.error("Error refreshing token:",e),n({type:"LOGOUT"})}},clearError(){n({type:"CLEAR_ERROR"})},hasPermission:(e,s)=>l.hasPermission({resource:e,action:s},t.user||void 0),canAccess(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return l.canAccess(e,s)},async updateUserPreferences(e){if(t.user)try{let s=await l.updateUser(t.user.id,{preferences:{...t.user.preferences,...e}});n({type:"UPDATE_USER",payload:s})}catch(e){throw console.error("Error updating user preferences:",e),e}}}};return(0,a.jsx)(o.Provider,{value:i,children:s})}function u(){let e=(0,r.useContext)(o);if(!e)throw Error("useAuth debe ser usado dentro de AuthProvider");return e}function x(e){return function(s){let{isAuthenticated:t,isLoading:r}=u();return r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):t?(0,a.jsx)(e,{...s}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acceso Requerido"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Debes iniciar sesi\xf3n para acceder a esta p\xe1gina."})]})})}}},59434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(52596),r=t(39688);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},66695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>l});var a=t(95155),r=t(12115),n=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,6874,9294,8441,1684,7358],()=>s(38389)),_N_E=e.O()}]);